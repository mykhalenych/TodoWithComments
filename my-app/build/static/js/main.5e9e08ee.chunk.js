(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{16:function(e,t,n){e.exports=n(28)},21:function(e,t,n){},28:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),s=n(5),r=n.n(s),o=(n(21),n(7)),i=n(13),l=n.n(i),u=function(e){var t=e.task,n=e.onChange,a=e.onDelete,s=e.onSelect,r=l()("list-item",{"list-item_done":t.done}),o=t.done?"list-item__text ":"";return c.a.createElement("li",{className:r,onClick:function(){return s(t)}},c.a.createElement("input",{className:"list-item__checkbox",type:"checkbox",defaultChecked:t.done,onChange:function(){return n(t.id)}}),c.a.createElement("span",{className:o},t.text),c.a.createElement("button",{className:"list-item__comments"},t.comments.length),c.a.createElement("button",{className:"list-item__delete-btn",onClick:function(){return a(t.id)}}))},m=function(e){var t=e.selectedTask;return t.comments?c.a.createElement("div",{className:"comments"},0===t.comments.length?c.a.createElement("li",{className:"list-item",key:1e4*Math.random()},c.a.createElement("span",null,"No comments")):t.comments.map((function(e){return c.a.createElement("li",{className:"list-item"},c.a.createElement("span",{className:"list-item__color",style:{backgroundColor:"".concat(e[1])}}),c.a.createElement("span",null,e[0]))}))):c.a.createElement("li",{className:"list-item"},c.a.createElement("span",null,"No comments"))},d=n(4),f=function(e){var t=e.onCreate,n=Object(a.useState)(""),s=Object(d.a)(n,2),r=s[0],o=s[1];return c.a.createElement("div",{className:"create-task"},c.a.createElement("input",{type:"text",className:"create-task__input",value:r,onChange:function(e){o(e.target.value)}}),c.a.createElement("button",{className:"btn create-task__btn",onClick:function(){t(r),o("")}},"Create"))},k=function(e){var t=e.selectedTask,n=e.onCreate,s=Object(a.useState)(""),r=Object(d.a)(s,2),o=r[0],i=r[1],l=Object(a.useState)(""),u=Object(d.a)(l,2),m=u[0],f=u[1];return c.a.createElement("div",{className:"create-task"},c.a.createElement("input",{className:"create-task__color",type:"color",onChange:function(e){f(e.target.value)}}),c.a.createElement("input",{type:"text",className:"create-task__input",value:o,onChange:function(e){i(e.target.value)}}),c.a.createElement("button",{className:"btn create-task__btn",onClick:function(){var e=[o,m];n(t.id,e),i("")}},"Create"))},E=function(e){return e.tasks.tasksList},h=function(e){return e.tasks.selectedTask},p=n(15),b=n(1),_="https://5e64c3daa49c210016106bc4.mockapi.io/tasks",T=function(){return function(e){fetch(_).then((function(e){if(e.ok)return e.json()})).then((function(e){return e})).then((function(t){return e(function(e){return{type:"TASK_LIST_RECIVED",payload:{tasksList:e}}}(t))}))}},N={getTasksList:T,updateTaskList:function(e){return function(t,n){var a=n(),c=E(a).find((function(t){return t.id===e})),s=Object(b.a)(Object(b.a)({},c),{},{done:!c.done});(function(e,t){return fetch("".concat(_,"/").concat(e),{method:"PUT",headers:{"Content-type":"application/json; charset=utf-8"},body:JSON.stringify(t)}).then((function(e){if(!e.ok)throw new Error("Failed to update task")}))})(e,s).then((function(){return t(T())}))}},deleteTaskList:function(e){return function(t){var n;(n=e,fetch("".concat(_,"/").concat(n),{method:"DELETE"}).then((function(e){if(!e.ok)throw new Error("Failed to delete tasks")}))).then((function(){return t(T())}))}},createTaskList:function(e){return function(t){var n;(n={text:e,done:!1},fetch(_,{method:"POST",headers:{"Content-type":"application/json; charset=utf-8"},body:JSON.stringify(n)}).then((function(e){if(!e.ok)throw new Error("Failed to create task")}))).then((function(){return t(T())}))}},getTask:function(e){return{type:"GET_TASK",payload:e}},createComent:function(e,t){return function(n,a){var c,s,r=a(),o=E(r).find((function(t){return t.id===e}));try{var i=Object(b.a)(Object(b.a)({},o),{},{comments:[].concat(Object(p.a)(o.comments),[t]),done:!1});(c=e,s=i,fetch("".concat(_,"/").concat(c),{method:"PUT",headers:{"Content-type":"application/json; charset=utf-8"},body:JSON.stringify(s)}).then((function(e){if(!e.ok)throw new Error("Failed to create comment")}))).then((function(){return n(T())}))}catch(l){console.error(l)}}}},O=Object(o.b)((function(e){return{tasks:E(e),selectedTask:h(e)}}),N)((function(e){var t=e.getTasksList,n=e.tasks,s=e.updateTaskList,r=e.createTaskList,o=e.deleteTaskList,i=e.getTask,l=e.selectedTask,d=e.createComent;Object(a.useEffect)((function(){t()}),[l]);var E=n.slice().sort((function(e,t){return e.done-t.done}));return c.a.createElement("div",{className:"form"},c.a.createElement("div",{className:"todo-list"},c.a.createElement("h2",{className:"title"},"Items"),c.a.createElement(f,{onCreate:r}),c.a.createElement("ul",{className:"list"},E.map((function(e){return c.a.createElement(u,{task:e,key:e.id,onChange:s,onDelete:o,onSelect:i})})))),c.a.createElement("div",{className:"comment-list"},c.a.createElement("h2",{className:"title"},void 0===l.id?"Comments":"Comments #".concat(l.id)),c.a.createElement(k,{selectedTask:l,onCreate:d}),c.a.createElement(m,{selectedTask:l})))})),v=n(2),C=n(14),y={tasksList:[],selectedTask:[]},j=Object(v.c)({tasks:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TASK_LIST_RECIVED":return Object(b.a)(Object(b.a)({},e),{},{tasksList:t.payload.tasksList});case"GET_TASK":return Object(b.a)(Object(b.a)({},e),{},{selectedTask:t.payload});default:return e}}}),g=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||v.d,S=Object(v.e)(j,g(Object(v.a)(C.a)));r.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(o.a,{store:S},c.a.createElement(O,null))),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.5e9e08ee.chunk.js.map